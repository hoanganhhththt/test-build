(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{582:function(e,t,n){"use strict";n.d(t,"f",(function(){return l})),n.d(t,"e",(function(){return i})),n.d(t,"g",(function(){return c})),n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return u})),n.d(t,"d",(function(){return m})),n.d(t,"c",(function(){return d})),n.d(t,"h",(function(){return f}));var a=n(100),r=n(76),o=n(16),l=function(e){return Object(a.a)("".concat(r.a.MMS_BACKEND_EIB,"/user/list"),"post",{},e,o.a.TIMEOUT_REPORT_TRANS_REQUEST)},i=function(e){return Object(a.a)("".concat(r.a.MMS_BACKEND_EIB,"/user/detail"),"post",{},e,o.a.TIMEOUT_REPORT_TRANS_REQUEST)},c=function(e){return Object(a.a)("".concat(r.a.MMS_BACKEND_EIB,"/user/update"),"post",{},e,o.a.TIMEOUT_REPORT_TRANS_REQUEST)},s=function(e){return Object(a.a)("".concat(r.a.MMS_BACKEND_EIB,"/user/add"),"post",{},e,o.a.TIMEOUT_REPORT_TRANS_REQUEST)},u=function(){return Object(a.a)("".concat(r.a.MMS_BACKEND_EIB,"/role/getAll"),"post",{},{},o.a.TIMEOUT_REPORT_TRANS_REQUEST)},m=function(e){return Object(a.a)("".concat(r.a.MMS_BACKEND_EIB,"/user/change-status"),"post",{},e,o.a.TIMEOUT_REPORT_TRANS_REQUEST)},d=function(){return Object(a.a)("".concat(r.a.MMS_BACKEND_EIB,"/user/getAll"),"post",{},{},o.a.TIMEOUT_REPORT_TRANS_REQUEST)},f=function(e){return Object(a.a)("".concat(r.a.MMS_BACKEND_EIB,"/user/getUser"),"post",{},e,o.a.TIMEOUT_REPORT_TRANS_REQUEST)}},616:function(e,t,n){"use strict";t.a=n.p+"src/assets/img/logo.png"},712:function(e,t,n){},913:function(e,t,n){"use strict";n.r(t),n.d(t,"setLocalStorage",(function(){return I}));n(709),n(72),n(247),n(348),n(136),n(215),n(159),n(117),n(97),n(98),n(99),n(74),n(75),n(73),n(158),n(246),n(350);var a=n(0),r=n.n(a),o=n(714),l=n.n(o),i=n(794),c=n.n(i),s=n(619),u=n.n(s),m=n(27),d=(n(712),n(616),n(115)),f=n.n(d),p=n(95),E=(n(82),n(713)),g=n(260),h=n(697),b=n(698),T=n(16),S=n(116),v=n(582);function y(){return(y=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function O(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,r,o,l,i=[],c=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(a=o.call(n)).done)&&(i.push(a.value),i.length!==t);c=!0);}catch(e){s=!0,r=e}finally{try{if(!c&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(s)throw r}}return i}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return _(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function N(e){return(N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var R={labelCol:{span:24},wrapperCol:{span:24}},I=function(e,t){return localStorage.setItem(e,"object"===N(t)?JSON.stringify(t):t)},k=r.a.memo((function(e){var t=Object(m.useHistory)(),n=O(l.a.useForm(),1)[0],o=O(Object(a.useState)(!0),2);o[0],o[1];return r.a.createElement("div",{className:"box-container"},r.a.createElement("span",null,r.a.createElement("img",{src:g.a,alt:"logo",style:{width:320,marginBottom:30},className:"ava-logo"})),r.a.createElement("div",{className:"container-login ant-row"},r.a.createElement("div",{className:"col-form-login form-center"},r.a.createElement("div",{className:"panel"},r.a.createElement("div",{className:"text-center mb-60"},r.a.createElement("div",{className:"header-text"},r.a.createElement("p",{className:"text-vietinbank-header"},r.a.createElement("span",{className:"cl-blue"},"Đăng nhập")),r.a.createElement("p",{className:"text-vietinbank-header"},r.a.createElement("span",{className:"cl-red"},"Quản lý"),r.a.createElement("span",{className:"cl-blue"}," chi tiêu hộ gia đình")))),r.a.createElement(l.a,y({name:"normal_login",className:"login-form","data-testid":"login-form",layout:"vertical",form:n},R,{onFinish:function(e){Object(p.f)(e).then((function(e){if("00"===e.code){localStorage.setItem("lastLogin",new Date);var n=Math.round((new Date).getTime()/1e3),a=(null==e?void 0:e.data).token,r=Object(E.a)(a),o=r.exp-r.iat||0,l=n+o;localStorage.setItem("token_mms",a),localStorage.setItem("username_mms",r.sub),localStorage.setItem("expTimeToken_mms",l.toString()),localStorage.setItem("aboutTimeToken_mms",o.toString()),Object(v.b)().then((function(e){if(e.code===T.a.CODE_SUCCESS){var t,n=null==e||null===(t=e.data)||void 0===t?void 0:t.map((function(e,t){return{key:t,code:e.id,description:e.name}}));localStorage.setItem("roles",JSON.stringify(n))}})),Object(v.h)({username:r.sub}).then((function(e){e.code===T.a.CODE_SUCCESS&&localStorage.setItem("userInfo",JSON.stringify(e.data))})),t.push("/home")}else{if(e.code===T.a.LOGIN_WRONG){var i,c,s,m,d,f,p;if(null!=e&&e.data||Object(S.g)("error","Tên đăng nhập hoặc mật khẩu không chính xác, vui lòng kiểm tra lại"),null!=e&&e.data&&(null==e||null===(i=e.data)||void 0===i?void 0:i.failTimes)===(null==e||null===(c=e.data)||void 0===c?void 0:c.limitFailTimes)-1)Object(S.g)("error","Bạn đã nhập sai thông tin đăng nhập ".concat((null==e||null===(d=e.data)||void 0===d?void 0:d.limitFailTimes)-1," lần, nếu nhập sai ").concat(null==e||null===(f=e.data)||void 0===f?void 0:f.limitFailTimes," lần tài khoản sẽ bị khóa"));if(null!=e&&e.data&&(null==e||null===(s=e.data)||void 0===s?void 0:s.failTimes)===(null==e||null===(m=e.data)||void 0===m?void 0:m.limitFailTimes))Object(S.g)("error","Tài khoản của bạn đã bị khóa do nhập sai mật khẩu quá ".concat(null==e||null===(p=e.data)||void 0===p?void 0:p.limitFailTimes," lần.Vui lòng liên hệ quản trị viên để được trợ giúp"));try{u.a.destroy()}catch(e){console.log(e)}}try{u.a.destroy()}catch(e){console.log(e)}}}))},onFinishFailed:function(e){var t=e.errorFields;n.scrollToField(t[0].name)}}),r.a.createElement(l.a.Item,y({name:"username",label:"Tên đăng nhập"},R,{rules:[{required:!0,message:"Vui lòng nhập tên đăng nhập"},{validator:function(e,t){return function(e,t){return!e||/^[a-zA-Z0-9]{3,50}$/.test(e)?Promise.resolve(!0):Promise.reject(new Error("".concat(t," từ 3-50 ký tự, nhập ký tự không dấu, số, không nhập khoảng trắng, ký tự đặc biệt")))}(t,"Tên đăng nhập")}}]}),r.a.createElement(c.a,{className:"form-control",placeholder:"Tên đăng nhập",maxLength:50})),r.a.createElement(l.a.Item,y({name:"password",label:"Mật khẩu"},R,{rules:[{required:!0,message:"Vui lòng nhập mật khẩu"}]}),r.a.createElement(c.a.Password,{className:"form-control",placeholder:"Mật khẩu",maxLength:20,iconRender:function(e){return e?r.a.createElement(h.a,null):r.a.createElement(b.a,null)}})),r.a.createElement(l.a.Item,{style:{marginTop:30}},r.a.createElement("button",{type:"submit",className:"login-form-button ant-btn-primary ant-btn"},"Đăng nhập")),r.a.createElement("div",{className:"text-center ant-row"},r.a.createElement("div",{className:"text-center",style:{width:"100%"}},r.a.createElement("span",{className:"login-form-forgot",style:{width:"100%"},onClick:function(){return t.push("/register")}},"Đăng kí"))),r.a.createElement("div",{className:"text-center ant-row"},r.a.createElement("div",{className:"text-center",style:{width:"100%"}},r.a.createElement("span",{className:"login-form-forgot",style:{width:"100%"},onClick:function(){return t.push("/forgot-password")}},"Quên mật khẩu"))))))))}));k.propTypes={history:f.a.object.isRequired},t.default=Object(m.withRouter)(k)}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvYXBpcy9Vc2VyTWFuYWdlbWVudC9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvYXNzZXRzL2ltZy9sb2dvLnBuZyIsIndlYnBhY2s6Ly8vLi9zcmMvcGFnZXMvTG9naW4vaW5kZXguanMiXSwibmFtZXMiOlsiZ2V0TGlzdFVzZXIiLCJwYXJhbUJvZHkiLCJjYWxsQXBpIiwiY29uY2F0IiwiY29uZmlnIiwiTU1TX0JBQ0tFTkRfRUlCIiwiY29uc3RhbnRzIiwiVElNRU9VVF9SRVBPUlRfVFJBTlNfUkVRVUVTVCIsImdldERldGFpbFVzZXIiLCJnZXRVcGRhdGVVc2VyIiwiZ2V0QWRkbFVzZXIiLCJnZXRBbGxSb2xlcyIsImdldENoYW5nZVN0YXR1c1VzZXIiLCJnZXRBbGxVc2VyIiwiZ2V0VXNlckJ5VXNlcm5hbWUiLCJ0YWlsTGF5b3V0IiwibGFiZWxDb2wiLCJzcGFuIiwid3JhcHBlckNvbCIsInNldExvY2FsU3RvcmFnZSIsImtleSIsInZhbHVlIiwibG9jYWxTdG9yYWdlIiwic2V0SXRlbSIsIl90eXBlb2YiLCJKU09OIiwic3RyaW5naWZ5IiwiTG9naW4iLCJSZWFjdCIsIm1lbW8iLCJwcm9wcyIsImhpc3RvcnkiLCJ1c2VIaXN0b3J5IiwiZm9ybSIsIl9zbGljZWRUb0FycmF5IiwiRm9ybSIsInVzZUZvcm0iLCJfdXNlU3RhdGUyIiwidXNlU3RhdGUiLCJjcmVhdGVFbGVtZW50IiwiY2xhc3NOYW1lIiwic3JjIiwiTG9nbzIiLCJhbHQiLCJzdHlsZSIsIndpZHRoIiwibWFyZ2luQm90dG9tIiwiX2V4dGVuZHMiLCJuYW1lIiwiZGF0YS10ZXN0aWQiLCJsYXlvdXQiLCJvbkZpbmlzaCIsInZhbHVlcyIsImxvZ2luIiwidGhlbiIsInJlc3BvbnNlTG9naW4iLCJjb2RlIiwiRGF0ZSIsImN1cnJlbnRUaW1lTG9naW4iLCJNYXRoIiwicm91bmQiLCJnZXRUaW1lIiwidG9rZW4iLCJkYXRhIiwiZGVjb2RlVG9rZW4iLCJqd3REZWNvZGUiLCJhYm91dFRpbWVUb2tlbiIsImV4cCIsImlhdCIsImV4cFRpbWVUb2tlbiIsInN1YiIsInRvU3RyaW5nIiwicmVzIiwiQ09ERV9TVUNDRVNTIiwiX3JlcyRkYXRhIiwibWFwIiwiaXRlbSIsImlkIiwiZGVzY3JpcHRpb24iLCJ1c2VybmFtZSIsInB1c2giLCJMT0dJTl9XUk9ORyIsIl9yZXNwb25zZUxvZ2luJGRhdGEyIiwiX3Jlc3BvbnNlTG9naW4kZGF0YTMiLCJfcmVzcG9uc2VMb2dpbiRkYXRhNiIsIl9yZXNwb25zZUxvZ2luJGRhdGE3IiwiX3Jlc3BvbnNlTG9naW4kZGF0YTQiLCJfcmVzcG9uc2VMb2dpbiRkYXRhNSIsIl9yZXNwb25zZUxvZ2luJGRhdGE4Iiwibm90aWZpY2F0aW9uIiwiZmFpbFRpbWVzIiwibGltaXRGYWlsVGltZXMiLCJtZXNzYWdlIiwiZGVzdHJveSIsImUiLCJjb25zb2xlIiwibG9nIiwib25GaW5pc2hGYWlsZWQiLCJfcmVmIiwiZXJyb3JGaWVsZHMiLCJzY3JvbGxUb0ZpZWxkIiwiSXRlbSIsImxhYmVsIiwicnVsZXMiLCJyZXF1aXJlZCIsInZhbGlkYXRvciIsInJ1bGUiLCJmaWVsZCIsInRlc3QiLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsIkVycm9yIiwidmFsaWRhdGVVc2VybmFtZSIsIklucHV0IiwicGxhY2Vob2xkZXIiLCJtYXhMZW5ndGgiLCJQYXNzd29yZCIsImljb25SZW5kZXIiLCJ2aXNpYmxlIiwiRXllVHdvVG9uZSIsIkV5ZUludmlzaWJsZVR3b1RvbmUiLCJtYXJnaW5Ub3AiLCJ0eXBlIiwib25DbGljayIsInByb3BUeXBlcyIsIlByb3BUeXBlcyIsIm9iamVjdCIsImlzUmVxdWlyZWQiLCJ3aXRoUm91dGVyIl0sIm1hcHBpbmdzIjoiMkZBQUEsNlNBSU1BLEVBQWMsU0FBQ0MsR0FBUyxPQUFLQyxZQUFRLEdBQURDLE9BQ3JDQyxJQUFPQyxnQkFBZSxjQUN6QixPQUNBLEdBQ0FKLEVBQ0FLLElBQVVDLCtCQUdOQyxFQUFn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LElBQU1HLFNBQVEsQ0FDYjdFLFVBQVUsZUFDVjJFLFlBQVksV0FDWkMsVUFBVyxHQUNYRSxXQUFZLFNBQUNDLEdBQU8sT0FBTUEsRUFBVTNGLElBQUFXLGNBQUNpRixJQUFVLE1BQU01RixJQUFBVyxjQUFDa0YsSUFBbUIsVUFHN0U3RixJQUFBVyxjQUFDSixJQUFLa0UsS0FBSSxDQUFDekQsTUFBTyxDQUFFOEUsVUFBVyxLQUM3QjlGLElBQUFXLGNBQUEsVUFDRW9GLEtBQUssU0FDTG5GLFVBQVUsNkNBQ1gsY0FLSFosSUFBQVcsY0FBQSxPQUFLQyxVQUFVLHVCQUNiWixJQUFBVyxjQUFBLE9BQUtDLFVBQVUsY0FBY0ksTUFBTyxDQUFFQyxNQUFPLFNBQzNDakIsSUFBQVcsY0FBQSxRQUNFQyxVQUFVLG9CQUNWSSxNQUFPLENBQUVDLE1BQU8sUUFDaEIrRSxRQUFTLGtCQUFNN0YsRUFBUWlELEtBQUssZUFDN0IsYUFNTHBELElBQUFXLGNBQUEsT0FBS0MsVUFBVSx1QkFDYlosSUFBQVcsY0FBQSxPQUFLQyxVQUFVLGNBQWNJLE1BQU8sQ0FBRUMsTUFBTyxTQUMzQ2pCLElBQUFXLGNBQUEsUUFDRUMsVUFBVSxvQkFDVkksTUFBTyxDQUFFQyxNQUFPLFFBQ2hCK0UsUUFBUyxrQkFBTTdGLEVBQVFpRCxLQUFLLHNCQUM3QiwyQkFhbkJyRCxFQUFNa0csVUFBWSxDQUNoQjlGLFFBQVMrRixJQUFVQyxPQUFPQyxZQUdiQywrQkFBV3RHIiwiZmlsZSI6ImpzLzE5LjI1NjQyM2QyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGNhbGxBcGkgZnJvbSAnLi4vaW5kZXgnO1xyXG5pbXBvcnQgY29uZmlnIGZyb20gJy4uL0VuZHBvaW50Q29uZmlnJztcclxuaW1wb3J0IGNvbnN0YW50cyBmcm9tICdjb25zdGFudHMnO1xyXG5cclxuY29uc3QgZ2V0TGlzdFVzZXIgPSAocGFyYW1Cb2R5KSA9PiBjYWxsQXBpKFxyXG4gIGAke2NvbmZpZy5NTVNfQkFDS0VORF9FSUJ9L3VzZXIvbGlzdGAsXHJcbiAgJ3Bvc3QnLFxyXG4gIHt9LFxyXG4gIHBhcmFtQm9keSxcclxuICBjb25zdGFudHMuVElNRU9VVF9SRVBPUlRfVFJBTlNfUkVRVUVTVFxyXG4pO1xyXG5cclxuY29uc3QgZ2V0RGV0YWlsVXNlciA9IChwYXJhbUJvZHkpID0+IGNhbGxBcGkoXHJcbiAgYCR7Y29uZmlnLk1NU19CQUNLRU5EX0VJQn0vdXNlci9kZXRhaWxgLFxyXG4gICdwb3N0JyxcclxuICB7fSxcclxuICBwYXJhbUJvZHksXHJcbiAgY29uc3RhbnRzLlRJTUVPVVRfUkVQT1JUX1RSQU5TX1JFUVVFU1RcclxuKTtcclxuXHJcbmNvbnN0IGdldFVwZGF0ZVVzZXIgPSAocGFyYW1Cb2R5KSA9PiBjYWxsQXBpKFxyXG4gIGAke2NvbmZpZy5NTVNfQkFDS0VORF9FSUJ9L3VzZXIvdXBkYXRlYCxcclxuICAncG9zdCcsXHJcbiAge30sXHJcbiAgcGFyYW1Cb2R5LFxyXG4gIGNvbnN0YW50cy5USU1FT1VUX1JFUE9SVF9UUkFOU19SRVFVRVNUXHJcbik7XHJcblxyXG5jb25zdCBnZXRBZGRsVXNlciA9IChwYXJhbUJvZHkpID0+IGNhbGxBcGkoXHJcbiAgYCR7Y29uZmlnLk1NU19CQUNLRU5EX0VJQn0vdXNlci9hZGRgLFxyXG4gICdwb3N0JyxcclxuICB7fSxcclxuICBwYXJhbUJvZHksXHJcbiAgY29uc3RhbnRzLlRJTUVPVVRfUkVQT1JUX1RSQU5TX1JFUVVFU1RcclxuKTtcclxuXHJcbmNvbnN0IGdldEFsbFJvbGVzID0gKCkgPT4gY2FsbEFwaShcclxuICBgJHtjb25maWcuTU1TX0JBQ0tFTkRfRUlCfS9yb2xlL2dldEFsbGAsXHJcbiAgJ3Bvc3QnLFxyXG4gIHt9LFxyXG4gIHt9LFxyXG4gIGNvbnN0YW50cy5USU1FT1VUX1JFUE9SVF9UUkFOU19SRVFVRVNUXHJcbik7XHJcblxyXG5jb25zdCBnZXRDaGFuZ2VTdGF0dXNVc2VyID0gKHBhcmFtQm9keSkgPT4gY2FsbEFwaShcclxuICBgJHtjb25maWcuTU1TX0JBQ0tFTkRfRUlCfS91c2VyL2NoYW5nZS1zdGF0dXNgLFxyXG4gICdwb3N0JyxcclxuICB7fSxcclxuICBwYXJhbUJvZHksXHJcbiAgY29uc3RhbnRzLlRJTUVPVVRfUkVQT1JUX1RSQU5TX1JFUVVFU1RcclxuKTtcclxuXHJcbmNvbnN0IGdldEFsbFVzZXIgPSAoKSA9PiBjYWxsQXBpKFxyXG4gIGAke2NvbmZpZy5NTVNfQkFDS0VORF9FSUJ9L3VzZXIvZ2V0QWxsYCxcclxuICAncG9zdCcsXHJcbiAge30sXHJcbiAge30sXHJcbiAgY29uc3RhbnRzLlRJTUVPVVRfUkVQT1JUX1RSQU5TX1JFUVVFU1RcclxuKTtcclxuXHJcbmNvbnN0IGdldFVzZXJCeVVzZXJuYW1lID0gKHBhcmFtQm9keSkgPT4gY2FsbEFwaShcclxuICBgJHtjb25maWcuTU1TX0JBQ0tFTkRfRUlCfS91c2VyL2dldFVzZXJgLFxyXG4gICdwb3N0JyxcclxuICB7fSxcclxuICBwYXJhbUJvZHksXHJcbiAgY29uc3RhbnRzLlRJTUVPVVRfUkVQT1JUX1RSQU5TX1JFUVVFU1RcclxuKTtcclxuXHJcbmV4cG9ydCB7XHJcbiAgZ2V0TGlzdFVzZXIsXHJcbiAgZ2V0RGV0YWlsVXNlcixcclxuICBnZXRVcGRhdGVVc2VyLFxyXG4gIGdldEFkZGxVc2VyLFxyXG4gIGdldEFsbFJvbGVzLFxyXG4gIGdldENoYW5nZVN0YXR1c1VzZXIsXHJcbiAgZ2V0QWxsVXNlcixcclxuICBnZXRVc2VyQnlVc2VybmFtZVxyXG59O1xyXG4iLCJleHBvcnQgZGVmYXVsdCBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArIFwic3JjL2Fzc2V0cy9pbWcvbG9nby5wbmdcIjsiLCJpbXBvcnQgUmVhY3QsIHsgdXNlU3RhdGUgfSBmcm9tIFwicmVhY3RcIjtcclxuaW1wb3J0IEZvcm0gZnJvbSBcImFudGQvbGliL2Zvcm1cIjtcclxuaW1wb3J0IElucHV0IGZyb20gXCJhbnRkL2xpYi9pbnB1dFwiO1xyXG5pbXBvcnQgbWVzc2FnZSBmcm9tIFwiYW50ZC9saWIvbWVzc2FnZVwiO1xyXG5pbXBvcnQgVXNlck91dGxpbmVkIGZyb20gXCJAYW50LWRlc2lnbi9pY29ucy9Vc2VyT3V0bGluZWRcIjtcclxuaW1wb3J0IExvY2tPdXRsaW5lZCBmcm9tIFwiQGFudC1kZXNpZ24vaWNvbnMvTG9ja091dGxpbmVkXCI7XHJcbmltcG9ydCB7IHdpdGhSb3V0ZXIsIHVzZUhpc3RvcnkgfSBmcm9tIFwicmVhY3Qtcm91dGVyLWRvbVwiO1xyXG5pbXBvcnQgXCIuL2luZGV4LnNjc3NcIjtcclxuaW1wb3J0IExvZ28gZnJvbSBcImFzc2V0cy9pbWcvbG9nby5wbmdcIjtcclxuaW1wb3J0IFByb3BUeXBlcyBmcm9tIFwicHJvcC10eXBlc1wiO1xyXG5pbXBvcnQgeyBsb2dpbiB9IGZyb20gXCJhcGlzL0F1dGhcIjtcclxuaW1wb3J0IHtcclxuICBjbHVzdGVyVmFsaWRhdGVQYXNzLFxyXG4gIGlzQ29udGFpblNwYWNlLFxyXG4gIHJhbmdlTGVuZ3RoLFxyXG4gIHZhbGlkYXRlUGFzc3dvcmQsXHJcbn0gZnJvbSBcInV0aWxzL1ZhbGlkYXRpb25cIjtcclxuaW1wb3J0IGp3dERlY29kZSBmcm9tIFwiand0LWRlY29kZVwiO1xyXG5pbXBvcnQgTG9nbzIgZnJvbSBcImFzc2V0cy9pbWcvbG9nby1odXN0LTAyLnBuZ1wiO1xyXG5pbXBvcnQge1xyXG4gIEV5ZUludmlzaWJsZVR3b1RvbmUsXHJcbiAgRXllT3V0bGluZWQsXHJcbiAgRXllVHdvVG9uZSxcclxuICBJbmZvQ2lyY2xlT3V0bGluZWQsXHJcbn0gZnJvbSBcIkBhbnQtZGVzaWduL2ljb25zXCI7XHJcbmltcG9ydCBjb25zdGFudHMgZnJvbSBcInNyYy9jb25zdGFudHNcIjtcclxuaW1wb3J0IHsgbm90aWZpY2F0aW9uIH0gZnJvbSBcInV0aWxzL0NvbW1vbkZ1bmN0aW9uXCI7XHJcbmltcG9ydCB7IGdldEFsbFJvbGVzLCBnZXREZXRhaWxVc2VyLCBnZXRVc2VyQnlVc2VybmFtZSB9IGZyb20gXCJhcGlzL1VzZXJNYW5hZ2VtZW50XCI7XHJcblxyXG5jb25zdCB0YWlsTGF5b3V0ID0ge1xyXG4gIGxhYmVsQ29sOiB7XHJcbiAgICBzcGFuOiAyNCxcclxuICB9LFxyXG4gIHdyYXBwZXJDb2w6IHtcclxuICAgIHNwYW46IDI0LFxyXG4gIH0sXHJcbn07XHJcblxyXG5leHBvcnQgY29uc3Qgc2V0TG9jYWxTdG9yYWdlID0gKGtleSwgdmFsdWUpID0+XHJcbiAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXHJcbiAgICBrZXksXHJcbiAgICB0eXBlb2YgdmFsdWUgPT09IFwib2JqZWN0XCIgPyBKU09OLnN0cmluZ2lmeSh2YWx1ZSkgOiB2YWx1ZVxyXG4gICk7XHJcblxyXG5jb25zdCBMb2dpbiA9IFJlYWN0Lm1lbW8oKHByb3BzKSA9PiB7XHJcbiAgY29uc3QgaGlzdG9yeSA9IHVzZUhpc3RvcnkoKTtcclxuICBjb25zdCBbZm9ybV0gPSBGb3JtLnVzZUZvcm0oKTtcclxuICBjb25zdCBbc2VlUGFzcywgc2V0U2VlUGFzc10gPSB1c2VTdGF0ZSh0cnVlKTtcclxuXHJcbiAgY29uc3Qgb25DaGFuZ2VDbGlja1NlZSA9ICgpID0+IHtcclxuICAgIHNldFNlZVBhc3MoIXNlZVBhc3MpO1xyXG4gIH07XHJcblxyXG4gIGNvbnN0IG9uRmluaXNoID0gKHZhbHVlcykgPT4ge1xyXG4gICAgbG9naW4odmFsdWVzKS50aGVuKChyZXNwb25zZUxvZ2luKSA9PiB7XHJcbiAgICAgIGlmIChyZXNwb25zZUxvZ2luLmNvZGUgPT09IFwiMDBcIikge1xyXG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwibGFzdExvZ2luXCIsIG5ldyBEYXRlKCkpO1xyXG4gICAgICAgIGNvbnN0IGN1cnJlbnRUaW1lTG9naW4gPSBNYXRoLnJvdW5kKG5ldyBEYXRlKCkuZ2V0VGltZSgpIC8gMTAwMCk7XHJcbiAgICAgICAgY29uc3QgeyB0b2tlbiB9ID1cclxuICAgICAgICAgIHJlc3BvbnNlTG9naW4/LmRhdGE7XHJcbiAgICAgICAgY29uc3QgZGVjb2RlVG9rZW4gPSBqd3REZWNvZGUodG9rZW4pO1xyXG4gICAgICAgIGNvbnN0IGFib3V0VGltZVRva2VuID0gZGVjb2RlVG9rZW4uZXhwIC0gZGVjb2RlVG9rZW4uaWF0IHx8IDA7XHJcbiAgICAgICAgY29uc3QgZXhwVGltZVRva2VuID0gY3VycmVudFRpbWVMb2dpbiArIGFib3V0VGltZVRva2VuO1xyXG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwidG9rZW5fbW1zXCIsIHRva2VuKTtcclxuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcInVzZXJuYW1lX21tc1wiLCBkZWNvZGVUb2tlbi5zdWIpO1xyXG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwiZXhwVGltZVRva2VuX21tc1wiLCBleHBUaW1lVG9rZW4udG9TdHJpbmcoKSk7XHJcbiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJhYm91dFRpbWVUb2tlbl9tbXNcIiwgYWJvdXRUaW1lVG9rZW4udG9TdHJpbmcoKSk7XHJcbiAgICAgICAgZ2V0QWxsUm9sZXMoKS50aGVuKHJlcyA9PiB7XHJcbiAgICAgICAgICBpZihyZXMuY29kZSA9PT0gY29uc3RhbnRzLkNPREVfU1VDQ0VTUykge1xyXG4gICAgICAgICAgICBjb25zdCBkYXRhID0gcmVzPy5kYXRhPy5tYXAoKGl0ZW0sIGtleSk9PiB7XHJcbiAgICAgICAgICAgICAgY29uc3QgcmVzID0ge1xyXG4gICAgICAgICAgICAgICAga2V5OiBrZXksXHJcbiAgICAgICAgICAgICAgICBjb2RlOiBpdGVtLmlkLFxyXG4gICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IGl0ZW0ubmFtZSxcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgcmV0dXJuIHJlcztcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3JvbGVzJyxKU09OLnN0cmluZ2lmeShkYXRhKSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgICAgICBnZXRVc2VyQnlVc2VybmFtZSh7dXNlcm5hbWU6IGRlY29kZVRva2VuLnN1Yn0pLnRoZW4ocmVzID0+IHtcclxuICAgICAgICAgIGlmKHJlcy5jb2RlID09PSBjb25zdGFudHMuQ09ERV9TVUNDRVNTKSB7XHJcbiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd1c2VySW5mbycsIEpTT04uc3RyaW5naWZ5KHJlcy5kYXRhKSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgICAgICBoaXN0b3J5LnB1c2goXCIvaG9tZVwiKTtcclxuICAgICAgICAvLyBpZiAoZGVjb2RlVG9rZW4gJiYgZGVjb2RlVG9rZW4udGVtcG9yYXJ5UGFzc3dvcmQgPT09IDIpIHtcclxuICAgICAgICAvLyAgIGxvY2FsU3RvcmFnZS5jbGVhcigpO1xyXG4gICAgICAgIC8vICAgc2V0TG9jYWxTdG9yYWdlKFwiZGVjb2RlVG9rZW5cIiwgZGVjb2RlVG9rZW4pO1xyXG4gICAgICAgIC8vICAgc2V0TG9jYWxTdG9yYWdlKFwib2xkUGFzc3dvcmRcIiwgdmFsdWVzLnBhc3N3b3JkKTtcclxuICAgICAgICAvLyAgIHNldExvY2FsU3RvcmFnZShcInVzZXJuYW1lXCIsIHZhbHVlcy51c2VybmFtZSk7XHJcbiAgICAgICAgLy8gICBzZXRMb2NhbFN0b3JhZ2UoXCJyZXF1aWVkX3Jlc2V0X3Bhc3NcIiwgXCIwMFwiKTtcclxuICAgICAgICAvLyAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwidG9rZW5fbW1zXCIsIGFjY2Vzc1Rva2VuKTtcclxuICAgICAgICAvLyAgIGhpc3RvcnkucHVzaChcIi9yZXNldC1wYXNzd29yZFwiKTtcclxuICAgICAgICAvLyB9IGVsc2Uge1xyXG4gICAgICAgIC8vICAgY29uc3QgZGVjb2RlUmVmcmVzaFRva2VuID0gand0RGVjb2RlKHJlZnJlc2hUb2tlbik7XHJcbiAgICAgICAgLy8gICBjb25zdCBhYm91dFRpbWVUb2tlbiA9IGRlY29kZVRva2VuLmV4cCAtIGRlY29kZVRva2VuLmlhdCB8fCAwO1xyXG4gICAgICAgIC8vICAgY29uc3QgYWJvdXRUaW1lUmVmcmVzaFRva2VuID1cclxuICAgICAgICAvLyAgICAgZGVjb2RlUmVmcmVzaFRva2VuLmV4cCAtIGRlY29kZVJlZnJlc2hUb2tlbi5pYXQgfHwgMDtcclxuICAgICAgICAvLyAgIGNvbnN0IGV4cFRpbWVUb2tlbiA9IGN1cnJlbnRUaW1lTG9naW4gKyBhYm91dFRpbWVUb2tlbjtcclxuICAgICAgICAvLyAgIGNvbnN0IGV4cFRpbWVSZWZyZXNoVG9rZW4gPSBjdXJyZW50VGltZUxvZ2luICsgYWJvdXRUaW1lUmVmcmVzaFRva2VuO1xyXG4gICAgICAgIC8vICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJ0b2tlbl9tbXNcIiwgYWNjZXNzVG9rZW4pO1xyXG4gICAgICAgIC8vICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJyZWZyZXNoVG9rZW5fbW1zXCIsIHJlZnJlc2hUb2tlbik7XHJcbiAgICAgICAgLy8gICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcInVzZXJuYW1lX21tc1wiLCBkZWNvZGVUb2tlbi5zdWIpO1xyXG4gICAgICAgIC8vICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJleHBUaW1lVG9rZW5fbW1zXCIsIGV4cFRpbWVUb2tlbi50b1N0cmluZygpKTtcclxuICAgICAgICAvLyAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFxyXG4gICAgICAgIC8vICAgICBcImV4cFRpbWVSZWZyZXNoVG9rZW5fbW1zXCIsXHJcbiAgICAgICAgLy8gICAgIGV4cFRpbWVSZWZyZXNoVG9rZW4udG9TdHJpbmcoKVxyXG4gICAgICAgIC8vICAgKTtcclxuICAgICAgICAvLyAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwiYWJvdXRUaW1lVG9rZW5fbW1zXCIsIGFib3V0VGltZVRva2VuLnRvU3RyaW5nKCkpO1xyXG4gICAgICAgIC8vICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXHJcbiAgICAgICAgLy8gICAgIFwiYWJvdXRUaW1lUmVmcmVzaFRva2VuX21tc1wiLFxyXG4gICAgICAgIC8vICAgICBhYm91dFRpbWVSZWZyZXNoVG9rZW4udG9TdHJpbmcoKVxyXG4gICAgICAgIC8vICAgKTtcclxuXHJcbiAgICAgICAgLy8gICBoaXN0b3J5LnB1c2goXCIvdHJhbnNhY3Rpb24vbGlzdC1wYXltZW50XCIpO1xyXG4gICAgICAgIC8vIH1cclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBpZiAocmVzcG9uc2VMb2dpbi5jb2RlID09PSBjb25zdGFudHMuTE9HSU5fV1JPTkcpIHtcclxuICAgICAgICAgIGlmICghcmVzcG9uc2VMb2dpbj8uZGF0YSkge1xyXG4gICAgICAgICAgICBub3RpZmljYXRpb24oXHJcbiAgICAgICAgICAgICAgXCJlcnJvclwiLFxyXG4gICAgICAgICAgICAgIGBUw6puIMSRxINuZyBuaOG6rXAgaG/hurdjIG3huq10IGto4bqpdSBraMO0bmcgY2jDrW5oIHjDoWMsIHZ1aSBsw7JuZyBraeG7g20gdHJhIGzhuqFpYFxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICByZXNwb25zZUxvZ2luPy5kYXRhICYmIChyZXNwb25zZUxvZ2luPy5kYXRhPy5mYWlsVGltZXMgPT09XHJcbiAgICAgICAgICAgICAgcmVzcG9uc2VMb2dpbj8uZGF0YT8ubGltaXRGYWlsVGltZXMgLSAxKVxyXG4gICAgICAgICAgKSB7XHJcbiAgICAgICAgICAgIG5vdGlmaWNhdGlvbihcclxuICAgICAgICAgICAgICBcImVycm9yXCIsXHJcbiAgICAgICAgICAgICAgYELhuqFuIMSRw6Mgbmjhuq1wIHNhaSB0aMO0bmcgdGluIMSRxINuZyBuaOG6rXAgJHtyZXNwb25zZUxvZ2luPy5kYXRhPy5saW1pdEZhaWxUaW1lcyAtIDFcclxuICAgICAgICAgICAgICB9IGzhuqduLCBu4bq/dSBuaOG6rXAgc2FpICR7cmVzcG9uc2VMb2dpbj8uZGF0YT8ubGltaXRGYWlsVGltZXNcclxuICAgICAgICAgICAgICB9IGzhuqduIHTDoGkga2hv4bqjbiBz4bq9IGLhu4sga2jDs2FgXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICByZXNwb25zZUxvZ2luPy5kYXRhICYmIChyZXNwb25zZUxvZ2luPy5kYXRhPy5mYWlsVGltZXMgPT09XHJcbiAgICAgICAgICAgICAgcmVzcG9uc2VMb2dpbj8uZGF0YT8ubGltaXRGYWlsVGltZXMpXHJcbiAgICAgICAgICApIHtcclxuICAgICAgICAgICAgbm90aWZpY2F0aW9uKFxyXG4gICAgICAgICAgICAgIFwiZXJyb3JcIixcclxuICAgICAgICAgICAgICBgVMOgaSBraG/huqNuIGPhu6dhIGLhuqFuIMSRw6MgYuG7iyBraMOzYSBkbyBuaOG6rXAgc2FpIG3huq10IGto4bqpdSBxdcOhICR7cmVzcG9uc2VMb2dpbj8uZGF0YT8ubGltaXRGYWlsVGltZXN9IGzhuqduLlZ1aSBsw7JuZyBsacOqbiBo4buHIHF14bqjbiB0cuG7iyB2acOqbiDEkeG7gyDEkcaw4bujYyB0cuG7oyBnacO6cGBcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIG1lc3NhZ2UuZGVzdHJveSgpO1xyXG4gICAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhlKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgIG1lc3NhZ2UuZGVzdHJveSgpO1xyXG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKGUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBtZXNzYWdlLmVycm9yKHtcclxuICAgICAgICAvLyAgIGNvbnRlbnQ6IFwiVGjDtG5nIHRpbiDEkcSDbmcgbmjhuq1wIGNoxrBhIGNow61uaCB4w6FjIVwiLFxyXG4gICAgICAgIC8vICAga2V5OiBcImtleVwiLFxyXG4gICAgICAgIC8vIH0pO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9O1xyXG5cclxuICBjb25zdCBvbkZpbmlzaEZhaWxlZCA9ICh7IGVycm9yRmllbGRzIH0pID0+IHtcclxuICAgIGZvcm0uc2Nyb2xsVG9GaWVsZChlcnJvckZpZWxkc1swXS5uYW1lKTtcclxuICB9O1xyXG5cclxuICBjb25zdCB2YWxpZGF0ZVVzZXJuYW1lID0gKHZhbHVlLCBmaWVsZCkgPT4ge1xyXG4gICAgY29uc3QgcmVnZXggPSAvXlthLXpBLVowLTldezMsNTB9JC87XHJcbiAgICBpZiAoIXZhbHVlIHx8IHJlZ2V4LnRlc3QodmFsdWUpKSB7XHJcbiAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUodHJ1ZSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoXHJcbiAgICAgIG5ldyBFcnJvcihcclxuICAgICAgICBgJHtmaWVsZH0gdOG7qyAzLTUwIGvDvSB04buxLCBuaOG6rXAga8O9IHThu7Ega2jDtG5nIGThuqV1LCBz4buRLCBraMO0bmcgbmjhuq1wIGtob+G6o25nIHRy4bqvbmcsIGvDvSB04buxIMSR4bq3YyBiaeG7h3RgXHJcbiAgICAgIClcclxuICAgICk7XHJcbiAgfTtcclxuXHJcbiAgcmV0dXJuIChcclxuICAgIDxkaXYgY2xhc3NOYW1lPVwiYm94LWNvbnRhaW5lclwiPlxyXG4gICAgICA8c3Bhbj5cclxuICAgICAgICA8aW1nXHJcbiAgICAgICAgICBzcmM9e0xvZ28yfVxyXG4gICAgICAgICAgYWx0PVwibG9nb1wiXHJcbiAgICAgICAgICBzdHlsZT17eyB3aWR0aDogMzIwLCBtYXJnaW5Cb3R0b206IDMwIH19XHJcbiAgICAgICAgICBjbGFzc05hbWU9XCJhdmEtbG9nb1wiXHJcbiAgICAgICAgLz5cclxuICAgICAgPC9zcGFuPlxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbnRhaW5lci1sb2dpbiBhbnQtcm93XCI+XHJcbiAgICAgICAgey8qIDxkaXYgY2xhc3NOYW1lPVwiY29sLWZvcm0tbG9naW4gdGV4dC1jZW50ZXIgbG9nby1jZW50ZXIgYm9yZGVyLXJpZ2h0XCI+XHJcbiAgICAgICAgPGltZ1xyXG4gICAgICAgICAgc3JjPXtMb2dvfVxyXG4gICAgICAgICAgY2xhc3NOYW1lPVwiaW1nLWxvZ29cIlxyXG4gICAgICAgICAgYWx0PVwibG9nb1wiXHJcbiAgICAgICAgLz5cclxuICAgICAgPC9kaXY+ICovfVxyXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29sLWZvcm0tbG9naW4gZm9ybS1jZW50ZXJcIj5cclxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicGFuZWxcIj5cclxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LWNlbnRlciBtYi02MFwiPlxyXG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaGVhZGVyLXRleHRcIj5cclxuICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtdmlldGluYmFuay1oZWFkZXJcIj5cclxuICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwiY2wtYmx1ZVwiPsSQxINuZyBuaOG6rXA8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICA8L3A+XHJcbiAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LXZpZXRpbmJhbmstaGVhZGVyXCI+XHJcbiAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImNsLXJlZFwiPlF14bqjbiBsw708L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImNsLWJsdWVcIj4gY2hpIHRpw6p1IGjhu5kgZ2lhIMSRw6xuaDwvc3Bhbj5cclxuICAgICAgICAgICAgICAgIDwvcD5cclxuICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPC9kaXY+XHJcblxyXG4gICAgICAgICAgICA8Rm9ybVxyXG4gICAgICAgICAgICAgIG5hbWU9XCJub3JtYWxfbG9naW5cIlxyXG4gICAgICAgICAgICAgIGNsYXNzTmFtZT1cImxvZ2luLWZvcm1cIlxyXG4gICAgICAgICAgICAgIGRhdGEtdGVzdGlkPVwibG9naW4tZm9ybVwiXHJcbiAgICAgICAgICAgICAgbGF5b3V0PVwidmVydGljYWxcIlxyXG4gICAgICAgICAgICAgIGZvcm09e2Zvcm19XHJcbiAgICAgICAgICAgICAgey4uLnRhaWxMYXlvdXR9XHJcbiAgICAgICAgICAgICAgb25GaW5pc2g9e29uRmluaXNofVxyXG4gICAgICAgICAgICAgIG9uRmluaXNoRmFpbGVkPXtvbkZpbmlzaEZhaWxlZH1cclxuICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgIDxGb3JtLkl0ZW1cclxuICAgICAgICAgICAgICAgIG5hbWU9XCJ1c2VybmFtZVwiXHJcbiAgICAgICAgICAgICAgICBsYWJlbD1cIlTDqm4gxJHEg25nIG5o4bqtcFwiXHJcbiAgICAgICAgICAgICAgICB7Li4udGFpbExheW91dH1cclxuICAgICAgICAgICAgICAgIHJ1bGVzPXtbXHJcbiAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIlZ1aSBsw7JuZyBuaOG6rXAgdMOqbiDEkcSDbmcgbmjhuq1wXCIsXHJcbiAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB2YWxpZGF0b3I6IChydWxlLCB2YWx1ZSkgPT5cclxuICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRlVXNlcm5hbWUodmFsdWUsIFwiVMOqbiDEkcSDbmcgbmjhuq1wXCIpLFxyXG4gICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgXX1cclxuICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICA8SW5wdXRcclxuICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiZm9ybS1jb250cm9sXCJcclxuICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJUw6puIMSRxINuZyBuaOG6rXBcIlxyXG4gICAgICAgICAgICAgICAgICBtYXhMZW5ndGg9ezUwfVxyXG4gICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICA8L0Zvcm0uSXRlbT5cclxuICAgICAgICAgICAgICA8Rm9ybS5JdGVtXHJcbiAgICAgICAgICAgICAgICBuYW1lPVwicGFzc3dvcmRcIlxyXG4gICAgICAgICAgICAgICAgbGFiZWw9XCJN4bqtdCBraOG6qXVcIlxyXG4gICAgICAgICAgICAgICAgey4uLnRhaWxMYXlvdXR9XHJcbiAgICAgICAgICAgICAgICBydWxlcz17W1xyXG4gICAgICAgICAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiBcIlZ1aSBsw7JuZyBuaOG6rXAgbeG6rXQga2jhuql1XCIgfSxcclxuICAgICAgICAgICAgICAgICAgLy8ge1xyXG4gICAgICAgICAgICAgICAgICAvLyAgIHZhbGlkYXRvcjogKHJ1bGUsIHZhbHVlKSA9PlxyXG4gICAgICAgICAgICAgICAgICAvLyAgICAgdmFsaWRhdGVQYXNzd29yZChcclxuICAgICAgICAgICAgICAgICAgLy8gICAgICAgdmFsdWUsXHJcbiAgICAgICAgICAgICAgICAgIC8vICAgICAgIFwiTeG6rXQga2jhuql1IHBo4bqjaSBjw7MgdOG7kWkgdGhp4buDdSA4IGvDvSB04buxIHbDoCBjaOG7qWEgw610IG5o4bqldCAxIGvDvSB04buxIHPhu5EsIDEgY2jhu68gdGjGsOG7nW5nLCAxIGNo4buvIGhvYS4gQ2hvIHBow6lwIG5o4bqtcCBrw70gdOG7sSDEkeG6t2MgYmnhu4d0LCBz4buRLiBLaMO0bmcgbmjhuq1wIGtob+G6o25nIHRy4bqvbmcgdsOgIHh14buRbmcgZMOybmdcIlxyXG4gICAgICAgICAgICAgICAgICAvLyAgICAgKSxcclxuICAgICAgICAgICAgICAgICAgLy8gfSxcclxuICAgICAgICAgICAgICAgIF19XHJcbiAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgPElucHV0LlBhc3N3b3JkXHJcbiAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImZvcm0tY29udHJvbFwiXHJcbiAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiTeG6rXQga2jhuql1XCJcclxuICAgICAgICAgICAgICAgICAgbWF4TGVuZ3RoPXsyMH1cclxuICAgICAgICAgICAgICAgICAgaWNvblJlbmRlcj17KHZpc2libGUpID0+ICh2aXNpYmxlID8gPEV5ZVR3b1RvbmUgLz4gOiA8RXllSW52aXNpYmxlVHdvVG9uZSAvPil9XHJcbiAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgIDwvRm9ybS5JdGVtPlxyXG4gICAgICAgICAgICAgIDxGb3JtLkl0ZW0gc3R5bGU9e3sgbWFyZ2luVG9wOiAzMCB9fT5cclxuICAgICAgICAgICAgICAgIDxidXR0b25cclxuICAgICAgICAgICAgICAgICAgdHlwZT1cInN1Ym1pdFwiXHJcbiAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImxvZ2luLWZvcm0tYnV0dG9uIGFudC1idG4tcHJpbWFyeSBhbnQtYnRuXCJcclxuICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgxJDEg25nIG5o4bqtcFxyXG4gICAgICAgICAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgICAgICAgPC9Gb3JtLkl0ZW0+XHJcblxyXG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC1jZW50ZXIgYW50LXJvd1wiPlxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LWNlbnRlclwiIHN0eWxlPXt7IHdpZHRoOiBcIjEwMCVcIiB9fT5cclxuICAgICAgICAgICAgICAgICAgPHNwYW5cclxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJsb2dpbi1mb3JtLWZvcmdvdFwiXHJcbiAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgd2lkdGg6IFwiMTAwJVwiIH19XHJcbiAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gaGlzdG9yeS5wdXNoKFwiL3JlZ2lzdGVyXCIpfVxyXG4gICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgxJDEg25nIGvDrVxyXG4gICAgICAgICAgICAgICAgICA8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICA8L2Rpdj5cclxuXHJcbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LWNlbnRlciBhbnQtcm93XCI+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQtY2VudGVyXCIgc3R5bGU9e3sgd2lkdGg6IFwiMTAwJVwiIH19PlxyXG4gICAgICAgICAgICAgICAgICA8c3BhblxyXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImxvZ2luLWZvcm0tZm9yZ290XCJcclxuICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyB3aWR0aDogXCIxMDAlXCIgfX1cclxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBoaXN0b3J5LnB1c2goXCIvZm9yZ290LXBhc3N3b3JkXCIpfVxyXG4gICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgUXXDqm4gbeG6rXQga2jhuql1XHJcbiAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8L0Zvcm0+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgPC9kaXY+XHJcbiAgICA8L2Rpdj5cclxuICApO1xyXG59KTtcclxuXHJcbkxvZ2luLnByb3BUeXBlcyA9IHtcclxuICBoaXN0b3J5OiBQcm9wVHlwZXMub2JqZWN0LmlzUmVxdWlyZWQsXHJcbn07XHJcblxyXG5leHBvcnQgZGVmYXVsdCB3aXRoUm91dGVyKExvZ2luKTtcclxuIl0sInNvdXJjZVJvb3QiOiIifQ==